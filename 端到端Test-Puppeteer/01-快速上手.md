## ğŸ‘‹ Hi, Nice to meet you ~
æˆ‘æ˜¯å°é‘«åŒå­¦ï¼Œåœ¨åŒ—äº¬å·¥ä½œçš„ä¸€ä½å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆã€‚æˆ‘æ“…é•¿ä½¿ç”¨ [Vue.js](https://cn.vuejs.org/)ã€ [Angular](https://angular.cn/)ã€ [Typescript](https://www.typescriptlang.org/) å’Œ [Node.js](https://www.nodejs.com.cn/) æ„å»º [Web](https://developer.mozilla.org/zh-CN/docs/Web) åº”ç”¨ç¨‹åºå’Œç½‘ç«™ã€‚åŒæ—¶æˆ‘ä¹Ÿæ˜¯ä¸€ä½ä¹äºåˆ†äº«çš„ç¨‹åºå‘˜ï¼Œæˆ‘ç»å¸¸åˆ©ç”¨ä¼‘æ¯æ—¶é—´å†™å†™æŠ€æœ¯æ–‡ç« ã€åˆ†äº«è‡ªå·±ç»éªŒåŠå­¦ä¹ å¿ƒå¾—ã€‚

è¿‘ä¸¤å¹´ä¸»è¦åˆ©ç”¨ [MicroApp](https://micro-zoe.github.io/micro-app/) å¾®å‰ç«¯æ¡†æ¶ç»´æŠ¤å’Œè¿­ä»£å…¬å¸çš„é¡¹ç›®ï¼Œä¿è¯å†å²çš„ [Angular](https://angular.cn/) å·¥ç¨‹é€æ­¥å‘ [Vue.js](https://cn.vuejs.org/) çš„å¹³ç¨³è¿ç§»ã€‚

åº§å³é“­: ğŸ˜‡ æ‰€æœ‰ä»˜å‡ºéƒ½å°†æ˜¯æ²‰æ·€ï¼Œæ‰€æœ‰ç¾å¥½ç»ˆä¼šå¦‚æœŸè€Œè‡³

# å¿«é€Ÿä¸Šæ‰‹

Puppeteerï¼ˆå‚€å„¡å¸ˆï¼‰æä¾›äº†åŸºäº DevTools åè®®æ§åˆ¶ Chrome/Chromium çš„ Node.js æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ© Puppeteer æ¨¡å—æä¾›çš„ä¸€ç³»åˆ— API æ¥å®ç°å¯¹ç½‘é¡µçš„ç«¯åˆ°ç«¯æµ‹è¯•ä»»åŠ¡ã€‚

## ç‰¹æ€§ï¼š

1. è‡ªåŠ¨å®Œæˆè¡¨å•æäº¤ã€UI æµ‹è¯•ä»¥åŠé”®ç›˜è¾“å…¥ç­‰æ‰‹åŠ¨æ‰§è¡Œçš„å·¥ä½œï¼›
2. ä½¿ç”¨æœ€æ–°çš„ JavaScript å’Œæµè§ˆå™¨åŠŸèƒ½ç©¿ä»¶è‡ªåŠ¨åŒ–æµ‹è¯•ç¯å¢ƒï¼›
3. æ”¯æŒæ•æ‰ç½‘é¡µçš„è·Ÿè¸ªæ—¶é—´çº¿ï¼Œç”¨æ¥å¸®åŠ©è¯Šæ–­æ€§èƒ½é—®é¢˜ï¼›
4. æ”¯æŒæµ‹è¯•åŸºäº Chrome çš„æ‰©å±•ç¨‹åºï¼›
5. æ”¯æŒç½‘é¡µå±å¹•æˆªå›¾å’Œç”Ÿæˆ PDFï¼›
6. å¯¹ SPAï¼ˆå•é¡µé¢åº”ç”¨ç¨‹åºï¼‰è¿›è¡Œçˆ¬å–å¹¶ç”Ÿæˆé¢„æ¸²æŸ“å†…å®¹ï¼ˆSSRï¼‰ï¼›

## å®‰è£…ï¼š

```shell
npm install puppeteer
```

* å®‰è£…æ—¶ä¼šè‡ªåŠ¨ä¸‹è½½æœ€æ–°ç‰ˆçš„ Chrome for Testing å’Œ `chrome-headless-shell`ï¼ˆä» v21.6.0 å¼€å§‹ï¼‰äºŒè¿›åˆ¶æ–‡ä»¶ã€‚é»˜è®¤æµè§ˆå™¨ä¼šä¸‹è½½åˆ° `$HOME/.cache/puppeteer` ï¼ˆä» v19.0.0 å¼€å§‹ï¼‰æ–‡ä»¶å¤¹ã€‚
* å¦‚ä½•ä½ éœ€è¦è¿æ¥åˆ°è¿œç¨‹æµè§ˆå™¨æˆ–è‡ªè¡Œç®¡ç†æµè§ˆå™¨ï¼Œåˆ™å¯ä»¥ä½¿ç”¨`puppeteer-core`ï¼Œ`puppeteer-core` ä¸æä¾›ä»»åŠ¡é»˜è®¤å€¼ï¼Œå¹¶ä¸”ä¸ä¼šè‡ªåŠ¨å®‰è£… Chromeã€‚

## å¼€å§‹ï¼š

åˆå§‹åŒ–ä¸€ä¸ªç©ºé¡¹ç›®ï¼š

```shell
mkdir start-pptr && cd start-pptr
npm init -y
npm i puppeteer
echo 'console.log("Hello World!");' > index.mjs
npm pkg set scripts.start="node index.mjs" // v7.24.2 +
```

é `headless` æ¨¡å¼ä¸‹å®Œæˆæµè§ˆå™¨çš„å¯åŠ¨å’Œå¯¼èˆªï¼š

```javascript
import puppeteer from 'puppeteer'

(async () => {
  	// å¯åŠ¨æµè§ˆå™¨å¹¶æ‰“å¼€ä¸€ä¸ªç©ºé¡µé¢
    const browser = await puppeteer.launch({
        headless: false,
    })
    const page = await browser.newPage()
    
    // å°†é¡µé¢å¯¼èˆªåˆ°æŒ‡å®š URL
    await page.goto('https://developer.mozilla.org/zh-CN/')
    // è¿è¡Œå®Œæ‰€æœ‰æ“ä½œå¯ä»¥é€šè¿‡æ­¤ API å…³é—­æµè§ˆå™¨
    // await browser.close()
})()
```

ç°åœ¨é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹æ¥æ¼”ç¤º Puppeteer çš„å·¥ä½œæµç¨‹ï¼š

```javascript
import puppeteer from 'puppeteer'

(async () => {
    const browser = await puppeteer.launch()
    const page = await browser.newPage()
    await page.goto('https://developer.mozilla.org/zh-CN/')

		// åœ¨æœç´¢æ¡†è¾“å…¥ â€˜å¼€å§‹ä½¿ç”¨ Vueâ€™ å…³é”®è¯
    await page.type('#hp-search-input', 'ä½¿ç”¨ Vue')

  	// ç­‰å¾…æœç´¢æç¤ºå‡ºç°ï¼Œå¹¶ç‚¹å‡»ç¬¬ä¸€ä¸ªæç¤ºè¯
    const searchResultSelector = '.result-item'
    await page.waitForSelector(searchResultSelector)
    await page.click(searchResultSelector)

  	// é€šè¿‡æ–‡æœ¬é€‰æ‹©å™¨åŒ¹é…åŒ…å« â€˜ä½¿ç”¨ Vueâ€™ çš„é€‰æ‹©å™¨
    const titleSelector = await page.waitForSelector('text/ä½¿ç”¨ Vue')
    // è·å–æ­¤é€‰æ‹©å™¨çš„å…¨éƒ¨æ–‡æœ¬å†…å®¹å¹¶æ‰“å°
    const fullTitle = await titleSelector.evaluate(el => el.textContent)
    console.log(fullTitle)

    await browser.close()
})()
```

## ç¯å¢ƒè¦æ±‚ï¼š

1. Node.js 18+ï¼›
2. TypeScript 4.7.4+ ï¼ˆé€‰æ‹©ä½¿ç”¨ TypeScript æ—¶éœ€æ³¨æ„ç‰ˆæœ¬ï¼‰ï¼›
3. æ“ä½œç³»ç»Ÿï¼šWindows x64ã€MacOS x64ã€MacOS arm64 ä»¥åŠ Debian/Ubuntu Linux x64æ¶æ„ã€‚
